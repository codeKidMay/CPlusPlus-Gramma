# C++ç°ä»£è¯­æ³•æ·±åº¦å­¦ä¹ æŒ‡å— (C++11-23)

## å­¦ä¹ è·¯å¾„æ¦‚è§ˆ

æœ¬ç³»åˆ—æ‰‹å†Œä¸“ä¸ºæœ‰ç»éªŒçš„C++ç¨‹åºå‘˜è®¾è®¡ï¼Œæ·±å…¥å‰–æC++11åˆ°C++23çš„è¯­è¨€æ¼”è¿›ï¼Œæ¢ç´¢æ¯ä¸ªç‰¹æ€§èƒŒåçš„è®¾è®¡æ€æƒ³å’Œå®ç°åŸç†ã€‚

### ğŸ“š æ‰‹å†Œç»“æ„

| ç‰ˆæœ¬ | æ‰‹å†Œæ–‡ä»¶ | æ ¸å¿ƒä¸»é¢˜ | å­¦ä¹ é‡ç‚¹ |
|------|----------|----------|----------|
| **C++11** | [Cpp11_Advanced_Guide.md](./Cpp11_Advanced_Guide.md) | ç°ä»£C++åŸºç¡€ | å³å€¼å¼•ç”¨ã€æ™ºèƒ½æŒ‡é’ˆã€lambdaã€å¹¶å‘åŸè¯­ |
| **C++14** | [Cpp14_Advanced_Guide.md](./Cpp14_Advanced_Guide.md) | å®Œå–„ä¸ä¼˜åŒ– | ç±»å‹æ¨å¯¼ã€å¹¿ä¹‰æ•è·ã€constexpræ‰©å±• |
| **C++17** | [Cpp17_Advanced_Guide.md](./Cpp17_Advanced_Guide.md) | ç°ä»£åŒ–é£è·ƒ | ç»“æ„åŒ–ç»‘å®šã€æŠ˜å è¡¨è¾¾å¼ã€ç±»å‹å®‰å…¨å®¹å™¨ |
| **C++20** | [Cpp20_Advanced_Guide.md](./Cpp20_Advanced_Guide.md) | èŒƒå¼é©å‘½ | Conceptsã€Rangesã€Coroutinesã€Modules |
| **C++23** | [Cpp23_Advanced_Guide.md](./Cpp23_Advanced_Guide.md) | å®ç”¨ä¸»ä¹‰æˆç†Ÿ | std::expectedã€std::mdspanã€std::printã€rangeså¢å¼º |

## ğŸ¯ å­¦ä¹ ç­–ç•¥

### é˜¶æ®µä¸€ï¼šå¥ å®šç°ä»£C++åŸºç¡€ (C++11)
**é¢„è®¡å­¦ä¹ æ—¶é—´ï¼š2-3å‘¨**

**å¿…ä¿®æ ¸å¿ƒæ¦‚å¿µï¼š**
- **ç§»åŠ¨è¯­ä¹‰**ï¼šç†è§£å³å€¼å¼•ç”¨ã€ç§»åŠ¨æ„é€ ã€å®Œç¾è½¬å‘çš„åº•å±‚æœºåˆ¶
- **æ™ºèƒ½æŒ‡é’ˆ**ï¼šæŒæ¡RAIIçš„ç°ä»£å®ç°ï¼Œç†è§£å¼•ç”¨è®¡æ•°å’Œå¾ªç¯å¼•ç”¨è§£å†³æ–¹æ¡ˆ
- **lambdaè¡¨è¾¾å¼**ï¼šæ·±å…¥é—­åŒ…ç±»ç”Ÿæˆæœºåˆ¶å’Œæ•è·è¯­ä¹‰
- **å¹¶å‘ç¼–ç¨‹**ï¼šç†è§£å†…å­˜æ¨¡å‹ã€åŸå­æ“ä½œå’Œçº¿ç¨‹åº“è®¾è®¡

**å®è·µå»ºè®®ï¼š**
```cpp
// é‡ç‚¹ç»ƒä¹ ï¼šå®ç°è‡ªå·±çš„æ™ºèƒ½æŒ‡é’ˆ
template<typename T>
class my_unique_ptr { /* ... */ };

// æ·±åº¦ç†è§£ï¼šç§»åŠ¨è¯­ä¹‰çš„æ€§èƒ½å½±å“
class Resource {
    // å®ç°ç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼ï¼Œå¯¹æ¯”æ€§èƒ½å·®å¼‚
};
```

### é˜¶æ®µäºŒï¼šè¯­æ³•ç®€åŒ–ä¸æ€§èƒ½ä¼˜åŒ– (C++14)
**é¢„è®¡å­¦ä¹ æ—¶é—´ï¼š1-2å‘¨**

**å…³é”®æ”¹è¿›ç‚¹ï¼š**
- **ç±»å‹æ¨å¯¼å¢å¼º**ï¼šautoè¿”å›ç±»å‹ã€å˜é‡æ¨¡æ¿çš„åº”ç”¨åœºæ™¯
- **lambdaæ•è·æ‰©å±•**ï¼šè§£å†³ç§»åŠ¨æ•è·é—®é¢˜ï¼Œç†è§£ç¼–è¯‘å™¨å®ç°
- **constexpræ‰©å±•**ï¼šç¼–è¯‘æœŸè®¡ç®—èƒ½åŠ›çš„æå‡

**è¿›é˜¶å®è·µï¼š**
```cpp
// æŒ‘æˆ˜ï¼šå®ç°ç¼–è¯‘æœŸæ’åºç®—æ³•
constexpr auto sort_array(std::array<int, N> arr) {
    // ä½¿ç”¨C++14çš„æ‰©å±•constexprèƒ½åŠ›
};
```

### é˜¶æ®µä¸‰ï¼šè¡¨è¾¾åŠ›é©å‘½ (C++17)
**é¢„è®¡å­¦ä¹ æ—¶é—´ï¼š3-4å‘¨**

**çªç ´æ€§ç‰¹æ€§ï¼š**
- **ç»“æ„åŒ–ç»‘å®š**ï¼šæŒæ¡ç¼–è¯‘å™¨çš„è§£æ„æœºåˆ¶
- **if constexpr**ï¼šç»ˆç»“SFINAEå¤æ‚æ€§
- **æŠ˜å è¡¨è¾¾å¼**ï¼šå˜é•¿å‚æ•°åŒ…çš„ç»ˆææ­¦å™¨
- **ç±»å‹å®‰å…¨å®¹å™¨**ï¼šoptionalã€variantã€string_viewçš„æ·±å±‚åº”ç”¨

**é«˜çº§åº”ç”¨ï¼š**
```cpp
// å…ƒç¼–ç¨‹å®æˆ˜ï¼šä½¿ç”¨if constexprå’ŒæŠ˜å è¡¨è¾¾å¼
template<typename... Args>
void print_all_types(Args... args) {
    ((std::cout << typeid(args).name() << " "), ...);
}
```

### é˜¶æ®µå››ï¼šè¯­è¨€æ ¹æœ¬æ€§å˜é© (C++20)  
**é¢„è®¡å­¦ä¹ æ—¶é—´ï¼š4-6å‘¨**

**é©å‘½æ€§ç‰¹æ€§ï¼š**
- **Concepts**ï¼šç±»å‹çº¦æŸçš„èŒƒå¼è½¬å˜ï¼Œå‘Šåˆ«SFINAE
- **Ranges**ï¼šå‡½æ•°å¼ç¼–ç¨‹å’Œæƒ°æ€§æ±‚å€¼çš„å¼•å…¥
- **Coroutines**ï¼šå¼‚æ­¥ç¼–ç¨‹çš„è¯­è¨€çº§æ”¯æŒ
- **Modules**ï¼šç¼–è¯‘ç³»ç»Ÿçš„æ ¹æœ¬æ€§æ”¹é©

**ç»¼åˆé¡¹ç›®å»ºè®®ï¼š**
```cpp
// æ•´åˆæ‰€æœ‰C++20ç‰¹æ€§çš„é¡¹ç›®
module data_processor;
import std.core;

template<std::ranges::input_range R>
    requires std::integral<std::ranges::range_value_t<R>>
std::generator<int> process_data(R&& range) {
    for (auto value : range | std::views::filter(/*...*/) 
                            | std::views::transform(/*...*/)) {
        co_yield value;
    }
}
```

### é˜¶æ®µäº”ï¼šå®ç”¨ä¸»ä¹‰çš„æˆç†ŸæœŸ (C++23)
**é¢„è®¡å­¦ä¹ æ—¶é—´ï¼š2-3å‘¨**

**æ ¸å¿ƒæ”¹è¿›ï¼š**
- **std::expected**ï¼šå‡½æ•°å¼é”™è¯¯å¤„ç†èŒƒå¼ï¼Œå‘Šåˆ«å¼‚å¸¸çš„æ€§èƒ½å¼€é”€
- **std::mdspan**ï¼šå¤šç»´æ•°ç»„çš„é›¶å¼€é”€æŠ½è±¡ï¼Œç§‘å­¦è®¡ç®—çš„æ ‡å‡†åŒ–æ”¯æŒ
- **std::print**ï¼šç°ä»£åŒ–è¾“å‡ºç³»ç»Ÿï¼Œç»Ÿä¸€æ ¼å¼åŒ–å’Œæ€§èƒ½ä¼˜åŒ–
- **rangeså¢å¼º**ï¼šzipã€adjacentã€chunkç­‰æ–°è§†å›¾å®Œå–„ç”Ÿæ€

**å®ç”¨åŒ–é¡¹ç›®ï¼š**
```cpp
#include <expected>
#include <mdspan>
#include <print>

// å‡½æ•°å¼é”™è¯¯å¤„ç†é“¾
auto safe_calculation(double a, double b) -> std::expected<double, std::string> {
    return safe_divide(a, b)
        .and_then([](double result) { return safe_sqrt(result); })
        .transform([](double result) { return result * 2; });
}

// å¤šç»´ç§‘å­¦è®¡ç®—
std::vector<double> matrix_data(12);
std::mdspan<double, std::dextents<size_t, 2>> matrix(matrix_data.data(), 3, 4);
std::print("Matrix[1,2] = {}\n", matrix[1, 2]);
```

## ğŸ”„ ç‰ˆæœ¬é—´æ¼”è¿›å…³ç³»

### C++11 â†’ C++14ï¼šå®Œå–„åŸºç¡€
```cpp
// C++11çš„é—®é¢˜
template<typename T, typename U>
auto add(T t, U u) -> decltype(t + u) { return t + u; }

// C++14çš„æ”¹è¿›  
template<typename T, typename U>
auto add(T t, U u) { return t + u; }
```

### C++14 â†’ C++17ï¼šè¡¨è¾¾åŠ›æå‡
```cpp
// C++14çš„å†—é•¿
auto result = some_function();
int a = std::get<0>(result);
string b = std::get<1>(result);

// C++17çš„ç®€æ´
auto [a, b] = some_function();
```

### C++17 â†’ C++20ï¼šèŒƒå¼è½¬å˜
```cpp
// C++17çš„SFINAE
template<typename T>
std::enable_if_t<std::is_integral_v<T>, void>
process(T value) { /* ... */ }

// C++20çš„Concepts
template<std::integral T>
void process(T value) { /* ... */ }
```

### C++20 â†’ C++23ï¼šå®ç”¨ä¸»ä¹‰å®Œå–„
```cpp
// C++20çš„å¤æ‚é”™è¯¯å¤„ç†
std::optional<int> divide(int a, int b) {
    if (b == 0) return std::nullopt; // ä¸¢å¤±é”™è¯¯ä¿¡æ¯
    return a / b;
}

// C++23çš„å‡½æ•°å¼é”™è¯¯å¤„ç†
std::expected<int, std::string> divide(int a, int b) {
    if (b == 0) return std::unexpected("Division by zero");
    return a / b;
}
```

## ğŸ¨ è®¾è®¡å“²å­¦æ¼”è¿›

### C++11ï¼šç°ä»£åŒ–åŸºç¡€
- **RAIIå¼ºåŒ–**ï¼šæ™ºèƒ½æŒ‡é’ˆã€ç§»åŠ¨è¯­ä¹‰
- **å¹¶å‘åŸè¯­**ï¼šæ ‡å‡†åŒ–å¤šçº¿ç¨‹æ”¯æŒ
- **å‡½æ•°å¼å…ƒç´ **ï¼šlambdaè¡¨è¾¾å¼å¼•å…¥

### C++14ï¼šç»†èŠ‚å®Œå–„
- **å‡å°‘æ ·æ¿ä»£ç **ï¼šautoæ¨å¯¼ã€å˜é‡æ¨¡æ¿
- **æ€§èƒ½ä¼˜åŒ–**ï¼šç§»åŠ¨æ•è·ã€make_unique
- **ç¼–è¯‘æœŸè®¡ç®—**ï¼šconstexpræ‰©å±•

### C++17ï¼šç”¨æˆ·ä½“éªŒ
- **è¯­æ³•ç®€åŒ–**ï¼šç»“æ„åŒ–ç»‘å®šã€åµŒå¥—å‘½åç©ºé—´
- **ç±»å‹å®‰å…¨**ï¼šoptionalã€variantã€string_view
- **æ€§èƒ½æå‡**ï¼šå¹¶è¡Œç®—æ³•ã€å¼ºåˆ¶æ‹·è´çœç•¥

### C++20ï¼šæ ¹æœ¬å˜é©
- **çº¦æŸç¼–ç¨‹**ï¼šConceptsæ˜¾å¼åŒ–ç±»å‹è¦æ±‚
- **å¼‚æ­¥åŸç”ŸåŒ–**ï¼šCoroutinesè¯­è¨€çº§æ”¯æŒ
- **å‡½æ•°å¼ç¼–ç¨‹**ï¼šRangesæƒ°æ€§æ±‚å€¼
- **æ¨¡å—åŒ–æ¶æ„**ï¼šModulesé©æ–°ç¼–è¯‘æ¨¡å‹

### C++23ï¼šå®ç”¨ä¸»ä¹‰å®Œå–„
- **é”™è¯¯å¤„ç†ç°ä»£åŒ–**ï¼šexpectedæä¾›é›¶å¼€é”€å‡½æ•°å¼é”™è¯¯å¤„ç†
- **ç§‘å­¦è®¡ç®—æ”¯æŒ**ï¼šmdspanæ ‡å‡†åŒ–å¤šç»´æ•°ç»„æ“ä½œ
- **è¾“å‡ºç³»ç»Ÿç»Ÿä¸€**ï¼šprintç³»åˆ—ç®€åŒ–æ ¼å¼åŒ–è¾“å‡º
- **ç”Ÿæ€ç³»ç»Ÿå®Œå–„**ï¼šrangesæ–°è§†å›¾å®Œå–„å‡½æ•°å¼ç¼–ç¨‹å·¥å…·é“¾

## ğŸ“‹ ç‰¹æ€§å¯¹ç…§è¡¨

| ç‰¹æ€§ç±»åˆ« | C++11 | C++14 | C++17 | C++20 | C++23 |
|----------|--------|--------|--------|--------|--------|
| **ç±»å‹æ¨å¯¼** | auto, decltype | å‡½æ•°è¿”å›ç±»å‹æ¨å¯¼ | CTAD | Conceptsçº¦æŸ | æ˜¾å¼å¯¹è±¡å‚æ•° |
| **æ¨¡æ¿å…ƒç¼–ç¨‹** | å˜é•¿æ¨¡æ¿ | å˜é‡æ¨¡æ¿ | if constexpr, æŠ˜å  | Concepts, consteval | if constevalæ‰©å±• |
| **å‡½æ•°å¼ç¼–ç¨‹** | lambdaåŸºç¡€ | å¹¿ä¹‰æ•è· | ç®—æ³•æ”¹è¿› | Ranges, åç¨‹ | rangesæ–°è§†å›¾, expected |
| **å¹¶å‘ç¼–ç¨‹** | thread, atomic | shared_timed_mutex | å¹¶è¡Œç®—æ³• | jthread, åç¨‹ | - |
| **ç±»å‹å®‰å…¨** | å¼ºç±»å‹æšä¸¾ | - | optional, variant | Concepts, ä¸‰å‘æ¯”è¾ƒ | expectedé”™è¯¯å¤„ç† |
| **æ€§èƒ½ä¼˜åŒ–** | ç§»åŠ¨è¯­ä¹‰ | make_unique | æ‹·è´çœç•¥ | consteval, span | printç³»ç»Ÿ, mdspan |

## ğŸš€ å®æˆ˜é¡¹ç›®æ¨è

### åˆçº§é¡¹ç›®ï¼šæ™ºèƒ½æŒ‡é’ˆåº“ (C++11é‡ç‚¹)
å®ç°å®Œæ•´çš„æ™ºèƒ½æŒ‡é’ˆåº“ï¼ŒåŒ…æ‹¬unique_ptrã€shared_ptrã€weak_ptrçš„åŠŸèƒ½ã€‚

### ä¸­çº§é¡¹ç›®ï¼šå…ƒç¼–ç¨‹å·¥å…·åº“ (C++14-17)
å¼€å‘ä¸€å¥—å…ƒç¼–ç¨‹å·¥å…·ï¼ŒåŒ…æ‹¬ç±»å‹æ“ä½œã€ç¼–è¯‘æœŸç®—æ³•ã€åå°„æœºåˆ¶ã€‚

### é«˜çº§é¡¹ç›®ï¼šå¼‚æ­¥I/Oæ¡†æ¶ (C++20)
ä½¿ç”¨åç¨‹ã€Conceptsã€Rangesæ„å»ºç°ä»£å¼‚æ­¥I/Oæ¡†æ¶ã€‚

### ä¸“å®¶çº§é¡¹ç›®ï¼šç§‘å­¦è®¡ç®—åº“ (C++23)
ç»“åˆexpectedé”™è¯¯å¤„ç†ã€mdspanå¤šç»´æ•°ç»„ã€rangeså¢å¼ºè§†å›¾ï¼Œæ„å»ºé«˜æ€§èƒ½ç§‘å­¦è®¡ç®—åº“ã€‚

## ğŸ“– å­¦ä¹ èµ„æºè¡¥å……

### æ¯ä¸ªç‰ˆæœ¬çš„å­¦ä¹ æ£€æŸ¥ç‚¹

**C++11æŒæ¡æ ‡å‡†ï¼š**
- [ ] èƒ½å¤Ÿå®ç°ç§»åŠ¨è¯­ä¹‰ä¼˜åŒ–çš„å®¹å™¨ç±»
- [ ] ç†è§£lambdaè¡¨è¾¾å¼çš„é—­åŒ…æœºåˆ¶  
- [ ] ç†Ÿç»ƒä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†èµ„æº
- [ ] æŒæ¡å¤šçº¿ç¨‹ç¼–ç¨‹å’ŒåŸå­æ“ä½œ

**C++14æŒæ¡æ ‡å‡†ï¼š**
- [ ] ç†Ÿç»ƒä½¿ç”¨autoæ¨å¯¼ç®€åŒ–ä»£ç 
- [ ] èƒ½å¤Ÿç¼–å†™å¤æ‚çš„constexprå‡½æ•°
- [ ] ç†è§£å˜é‡æ¨¡æ¿çš„åº”ç”¨åœºæ™¯

**C++17æŒæ¡æ ‡å‡†ï¼š**
- [ ] ç†Ÿç»ƒä½¿ç”¨ç»“æ„åŒ–ç»‘å®š
- [ ] æŒæ¡æŠ˜å è¡¨è¾¾å¼å¤„ç†å˜é•¿å‚æ•°
- [ ] èƒ½å¤Ÿé€‰æ‹©åˆé€‚çš„ç±»å‹å®‰å…¨å®¹å™¨
- [ ] ç†è§£å¹¶è¡Œç®—æ³•çš„æ€§èƒ½ä¼˜åŠ¿

**C++20æŒæ¡æ ‡å‡†ï¼š**
- [ ] èƒ½å¤Ÿå®šä¹‰å’Œä½¿ç”¨Concepts
- [ ] ç†Ÿç»ƒç¼–å†™Rangesç®¡é“æ“ä½œ
- [ ] ç†è§£åç¨‹çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹
- [ ] æŒæ¡Modulesçš„ç»„ç»‡æ–¹å¼

**C++23æŒæ¡æ ‡å‡†ï¼š**
- [ ] ç†Ÿç»ƒä½¿ç”¨expectedè¿›è¡Œå‡½æ•°å¼é”™è¯¯å¤„ç†
- [ ] æŒæ¡mdspanè¿›è¡Œå¤šç»´æ•°ç»„æ“ä½œ
- [ ] èƒ½å¤Ÿä½¿ç”¨printç³»åˆ—æå‡è¾“å‡ºæ€§èƒ½
- [ ] ç†è§£rangesæ–°è§†å›¾çš„ç»„åˆä½¿ç”¨

## âš¡ æ€§èƒ½å¯¹æ¯”åŸºå‡†

æ¯ä¸ªç‰ˆæœ¬éƒ½åŒ…å«æ€§èƒ½æµ‹è¯•ä»£ç ï¼Œå»ºè®®åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­è¿è¡Œå¯¹æ¯”ï¼š

```cpp
// æ€§èƒ½æµ‹è¯•æ¨¡æ¿
template<typename Func>
auto benchmark(Func&& func, int iterations = 1000000) {
    auto start = std::chrono::high_resolution_clock::now();
    for (int i = 0; i < iterations; ++i) {
        func();
    }
    auto end = std::chrono::high_resolution_clock::now();
    return std::chrono::duration_cast<std::chrono::microseconds>(end - start);
}
```

é€šè¿‡è¿™å¥—å­¦ä¹ æŒ‡å—ï¼Œæ‚¨å°†å…¨é¢æŒæ¡ç°ä»£C++çš„ç²¾é«“ï¼Œç†è§£è¯­è¨€è®¾è®¡çš„æ¼”è¿›é€»è¾‘ï¼Œä¸ºåœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨è¿™äº›ç‰¹æ€§æ‰“ä¸‹åšå®åŸºç¡€ã€‚

---

*æœ¬å­¦ä¹ æŒ‡å—æŒç»­æ›´æ–°ï¼Œåæ˜ C++æ ‡å‡†çš„æœ€æ–°å‘å±•å’Œæœ€ä½³å®è·µã€‚*